<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš‚ Activity 3: Pictogram Puzzle</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Specific styles for the Pictogram Puzzle */
        .puzzle-box {
            background-color: var(--blue); /* Adverb color */
            padding: 30px;
            border-radius: 15px;
            color: white;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        .target-sentence {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 25px;
            padding: 10px;
            border-bottom: 2px dashed white;
        }
        .icon-bank {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .icon-token {
            font-size: 2.5em;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            background-color: var(--purple); /* The Abstract part color */
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            transition: transform 0.1s, opacity 0.1s;
            user-select: none;
            color: white;
        }
        .icon-token:hover {
            transform: scale(1.05);
        }
        .sequence-drop-zone {
            min-height: 80px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .sequence-token {
            background-color: var(--yellow);
            color: var(--text-dark);
            font-size: 2.5em;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>ğŸ–¼ï¸ Pictogram Puzzle</h1>
        <p class="activity-page-title" id="activity-counter">Activity 1 of 20</p>
    </header>
    <nav class="navigation">
        <a href="index.html">ğŸ  Main Hub</a>
        <a href="locomotive-lingo.html">1. Locomotive Lingo ğŸ§©</a>
        <a href="plural-punctuation.html">2. Plural Punctuation ğŸ” </a>
    </nav>
    <main class="content-container">

        <div class="instruction-box">
            <p><strong>Instructions:</strong> The sentence contains parts that can be mapped to a visual story. Click the pictogram tokens in the correct order to match the **sentence flow**.</p>
        </div>

        <div class="puzzle-box">
            <div class="target-sentence" id="target-sentence">
                I searched for the keys everywhere.
            </div>

            <div class="sequence-drop-zone" id="sequence-zone">
                <span style="font-size: 1.2em;">Click the icons below in order...</span>
            </div>

            <div class="icon-bank" id="icon-bank">
                </div>
            
            <button class="check-button" onclick="checkSequence()">ğŸ” Check Sequence</button>
            <button class="check-button" id="next-activity-btn" style="display: none; background-color: var(--purple);" onclick="loadNextActivity()">â¡ï¸ Next Activity</button>

            <p id="feedback-message" style="font-size: 1.5em; font-weight: 700; margin-top: 20px;">Ready to solve the puzzle!</p>

        </div>

    </main>
    <footer class="footer">
        <p>Keep those visual memory tracks clear! âœ¨</p>
    </footer>

    <script>
        // --- JavaScript for Pictogram Puzzle Logic (20 Activities) ---

        const iconBank = document.getElementById('icon-bank');
        const sequenceZone = document.getElementById('sequence-zone');
        const feedback = document.getElementById('feedback-message');
        const targetSentenceDisplay = document.getElementById('target-sentence');
        const nextButton = document.getElementById('next-activity-btn');
        const activityCounter = document.getElementById('activity-counter');
        const checkButton = document.querySelector('.check-button');

        let currentSequence = [];
        let currentActivityIndex = 0;

        // --- THE 20 ACTIVITY BANK ---
        // Format: { id, sentence, correctOrder: [ {emoji, name} ] }
        const activityBank = [
            { id: 1, sentence: "The cat walks.", correctOrder: [ {emoji: "ğŸˆâ€â¬›", name: "Cat"}, {emoji: "ğŸš¶", name: "Walks"} ] },
            { id: 2, sentence: "I searched for the keys everywhere.", correctOrder: [ {emoji: "ğŸ‘¤", name: "I"}, {emoji: "ğŸ”", name: "Searched"}, {emoji: "ğŸ”‘", name: "Keys"}, {emoji: "ğŸŒ", name: "Everywhere"} ] },
            { id: 3, sentence: "The boy throws a ball.", correctOrder: [ {emoji: "ğŸ‘¦ğŸ»", name: "Boy"}, {emoji: "âš¾", name: "Throws"}, {emoji: "ğŸŸ¡", name: "Ball"} ] },
            { id: 4, sentence: "The girls swing quickly.", correctOrder: [ {emoji: "ğŸ‘§ğŸ»ğŸ‘§ğŸ¼", name: "Girls"}, {emoji: "ğŸ”„", name: "Swing"}, {emoji: "ğŸ’¨", name: "Quickly"} ] },
            { id: 5, sentence: "The dogs run home.", correctOrder: [ {emoji: "ğŸ¶ğŸ¶", name: "Dogs"}, {emoji: "ğŸƒ", name: "Run"}, {emoji: "ğŸ ", name: "Home"} ] },
            { id: 6, sentence: "The train stops suddenly.", correctOrder: [ {emoji: "ğŸš‚", name: "Train"}, {emoji: "ğŸ›‘", name: "Stops"}, {emoji: "ğŸš¨", name: "Suddenly"} ] },
            { id: 7, sentence: "The students learn well.", correctOrder: [ {emoji: "ğŸ§‘â€ğŸ“", name: "Students"}, {emoji: "ğŸ§ ", name: "Learn"}, {emoji: "âœ”ï¸", name: "Well"} ] },
            { id: 8, sentence: "A flower grows slowly.", correctOrder: [ {emoji: "ğŸŒ¸", name: "Flower"}, {emoji: "ğŸŒ±", name: "Grows"}, {emoji: "ğŸŒ", name: "Slowly"} ] },
            { id: 9, sentence: "My friend calls loudly.", correctOrder: [ {emoji: "ğŸ‘¯", name: "Friend"}, {emoji: "ğŸ“", name: "Calls"}, {emoji: "ğŸ”Š", name: "Loudly"} ] },
            { id: 10, sentence: "The doctor helps often.", correctOrder: [ {emoji: "ğŸ‘©â€âš•ï¸", name: "Doctor"}, {emoji: "â•", name: "Helps"}, {emoji: "ğŸ”", name: "Often"} ] },
            { id: 11, sentence: "The boat sails beautifully.", correctOrder: [ {emoji: "â›µ", name: "Boat"}, {emoji: "ğŸŒŠ", name: "Sails"}, {emoji: "âœ¨", name: "Beautifully"} ] },
            { id: 12, sentence: "The fish swim far.", correctOrder: [ {emoji: "ğŸ ", name: "Fish"}, {emoji: "ğŸŠ", name: "Swim"}, {emoji: "â¡ï¸", name: "Far"} ] },
            { id: 13, sentence: "The clock ticks regularly.", correctOrder: [ {emoji: "â°", name: "Clock"}, {emoji: "âœ”ï¸", name: "Ticks"}, {emoji: "ğŸ—“ï¸", name: "Regularly"} ] },
            { id: 14, sentence: "The mouse eats quietly.", correctOrder: [ {emoji: "ğŸ", name: "Mouse"}, {emoji: "ğŸ§€", name: "Eats"}, {emoji: "ğŸ¤«", name: "Quietly"} ] },
            { id: 15, sentence: "We drove home quickly.", correctOrder: [ {emoji: "ğŸ§‘â€ğŸ¤â€ğŸ§‘", name: "We"}, {emoji: "ğŸš—", name: "Drove"}, {emoji: "ğŸ’¨", name: "Quickly"} ] },
            { id: 16, sentence: "She wrote a letter yesterday.", correctOrder: [ {emoji: "ğŸ‘©", name: "She"}, {emoji: "âœï¸", name: "Wrote"}, {emoji: "âœ‰ï¸", name: "Letter"}, {emoji: "ğŸ“…", name: "Yesterday"} ] },
            { id: 17, sentence: "The engine runs fast.", correctOrder: [ {emoji: "âš™ï¸", name: "Engine"}, {emoji: "ğŸƒ", name: "Runs"}, {emoji: "ğŸš€", name: "Fast"} ] },
            { id: 18, sentence: "He eats slowly.", correctOrder: [ {emoji: "ğŸ‘¨", name: "He"}, {emoji: "ğŸ”", name: "Eats"}, {emoji: "ğŸŒ", name: "Slowly"} ] },
            { id: 19, sentence: "The children dance joyfully.", correctOrder: [ {emoji: "ğŸ‘¶ğŸ¼ğŸ‘¶ğŸ½", name: "Children"}, {emoji: "ğŸ•º", name: "Dance"}, {emoji: "ğŸ˜„", name: "Joyfully"} ] },
            { id: 20, sentence: "I swim daily.", correctOrder: [ {emoji: "ğŸ‘¤", name: "I"}, {emoji: "ğŸŠ", name: "Swim"}, {emoji: "ğŸ—“ï¸", name: "Daily"} ] }
        ];

        // --- Core Functions ---

        function loadActivity(index) {
            const activity = activityBank[index];
            if (!activity) return;

            currentActivityIndex = index;
            currentSequence = [];
            sequenceZone.innerHTML = '<span style="font-size: 1.2em;">Click the icons below in order...</span>'; 
            iconBank.innerHTML = '';
            
            targetSentenceDisplay.textContent = activity.sentence;
            activityCounter.textContent = `Activity ${activity.id} of ${activityBank.length}`;
            
            feedback.textContent = `Ready to solve the puzzle!`;
            feedback.style.color = 'var(--text-dark)';
            nextButton.style.display = 'none';
            checkButton.style.display = 'inline-block';

            // Shuffle the icons for the bank
            const shuffledIcons = [...activity.correctOrder].sort(() => Math.random() - 0.5);

            shuffledIcons.forEach(item => {
                const token = document.createElement('div');
                token.className = 'icon-token';
                token.textContent = item.emoji;
                token.setAttribute('data-name', item.name);
                token.onclick = () => addToSequence(token);
                iconBank.appendChild(token);
            });
        }

        function addToSequence(token) {
            // Remove initial text prompt if it exists
            if (sequenceZone.querySelector('span')) {
                sequenceZone.innerHTML = '';
            }
            
            // Create a copy for the sequence zone
            const sequenceToken = document.createElement('div');
            sequenceToken.className = 'sequence-token';
            sequenceToken.textContent = token.textContent;
            sequenceToken.onclick = () => removeFromSequence(sequenceToken, token.textContent);
            
            sequenceZone.appendChild(sequenceToken);
            currentSequence.push(token.textContent);

            // Hide the original token
            token.style.opacity = '0.3';
            token.style.pointerEvents = 'none';

            feedback.textContent = `Icon added. Current length: ${currentSequence.length}`;
        }

        function removeFromSequence(sequenceToken, originalEmoji) {
            sequenceZone.removeChild(sequenceToken);

            // Remove from array (find the last instance of the emoji)
            let index = -1;
            for(let i = currentSequence.length - 1; i >= 0; i--) {
                if(currentSequence[i] === originalEmoji) {
                    index = i;
                    break;
                }
            }
            if (index > -1) {
                currentSequence.splice(index, 1);
            }

            // Restore original token visibility
            const originalToken = Array.from(iconBank.children).find(t => t.textContent === originalEmoji && t.style.pointerEvents === 'none');
            if (originalToken) {
                originalToken.style.opacity = '1';
                originalToken.style.pointerEvents = 'auto';
            }
            
            feedback.textContent = `Icon removed. Current length: ${currentSequence.length}`;
        }

        function checkSequence() {
            const correctOrderEmojis = activityBank[currentActivityIndex].correctOrder.map(item => item.emoji);

            if (currentSequence.length !== correctOrderEmojis.length) {
                feedback.textContent = `âŒ Not finished! You need ${correctOrderEmojis.length} icons.`;
                feedback.style.color = 'var(--red)';
                return;
            }

            const isCorrect = currentSequence.every((value, index) => value === correctOrderEmojis[index]);

            if (isCorrect) {
                feedback.textContent = 'ğŸ¥³ VISUAL MASTERY! That is the correct flow of the sentence.';
                feedback.style.color = 'var(--green)';
                nextButton.style.display = 'inline-block';
                checkButton.style.display = 'none';
            } else {
                feedback.textContent = 'ğŸ¤” Check your steps! The visual story is out of order. Try again.';
                feedback.style.color = 'var(--red)';
            }
        }

        function loadNextActivity() {
            const nextIndex = currentActivityIndex + 1;
            if (nextIndex < activityBank.length) {
                loadActivity(nextIndex);
            } else {
                feedback.textContent = "ğŸ¥³ YOU CRUSHED IT! All 20 Pictogram activities complete. You are a visual genius.";
                feedback.style.color = 'var(--purple)';
                nextButton.style.display = 'none';
                checkButton.style.display = 'none';
            }
        }

        // Start the first activity on load
        loadActivity(0); 
    </script>
</body>
</html>
