<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÇ Activity 2: Plural Punctuation</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Specific styles for the Plural Switcher */
        .activity-counter {
            color: var(--green);
            font-size: 1.2em;
            margin-top: -10px;
        }
        .switch-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        .singular-panel, .plural-panel {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            min-height: 250px;
            transition: background-color 0.4s;
        }
        .singular-panel { border: 3px solid var(--orange); }
        .plural-panel { border: 3px solid var(--green); }

        .s-token-zone {
            font-size: 1.8em;
            font-weight: 700;
            padding: 15px 0;
            min-height: 50px;
            line-height: 1.4;
        }

        .s-morpheme {
            background-color: var(--red);
            color: white;
            padding: 5px 10px;
            border-radius: 50%;
            cursor: grab;
            display: inline-block;
            transition: transform 0.2s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            font-size: 0.8em;
            line-height: 1;
            margin: 0 2px;
            user-select: none;
        }
        .s-morpheme:hover {
            transform: scale(1.1);
        }
        .pictogram-visual {
            min-height: 100px;
            font-size: 3em;
            margin-top: 15px;
        }
        .check-button {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>üöÇ Plural Punctuation Switcher</h1>
        <p class="activity-page-title activity-counter" id="activity-counter">Activity 1 of 20</p>
    </header>
    <nav class="navigation">
        <a href="index.html">üè† Main Hub</a>
        <a href="locomotive-lingo.html">1. Locomotive Lingo üß©</a>
        <a href="pictogram-puzzle.html">3. Pictogram Puzzle üñºÔ∏è</a>
    </nav>
    <main class="content-container">

        <div class="instruction-box">
            <p><strong>Instructions:</strong> Drag the <strong>-s token</strong> üî¥ from the verb (Singular side) and drop it onto the noun (Plural side) to correctly switch the sentence from singular to plural. Watch the picture change!</p>
        </div>

        <div class="switch-container">
            <div class="singular-panel" id="singular-panel">
                <h3 id="singular-title">Singular (One Cat) üê±</h3>
                <div class="s-token-zone" id="singular-sentence">
                    </div>
                <div class="pictogram-visual" id="singular-pictogram">
                    </div>
            </div>

            <div class="plural-panel" id="plural-panel">
                <h3 id="plural-title">Plural (Multiple Cats) üêà‚Äç‚¨õüêà‚Äç‚¨õ</h3>
                <div class="s-token-zone" id="plural-sentence">
                    </div>
                <div class="pictogram-visual" id="plural-pictogram">
                    </div>
            </div>
        </div>

        <button class="check-button" onclick="checkState()">‚úÖ Check State</button>
        <button class="check-button" id="next-activity-btn" style="display: none; background-color: var(--purple);" onclick="loadNextActivity()">‚û°Ô∏è Next Activity</button>
        <p id="feedback-message" style="font-size: 1.5em; font-weight: 700; margin-top: 20px; color: var(--text-dark);">Move the -s to the correct side!</p>

    </main>
    <footer class="footer">
        <p>Keep those train parts moving! ‚ú®</p>
    </footer>

    <script>
        // --- JavaScript for the Plural Switcher Logic (20 Activities) ---

        const sToken = document.createElement('span');
        sToken.id = 's-token';
        sToken.className = 's-morpheme';
        sToken.textContent = '-s';
        sToken.draggable = true;
        sToken.addEventListener('dragstart', handleDragStart);
        sToken.addEventListener('click', handleTokenClick); // Click handler for accessibility

        const singularSentence = document.getElementById('singular-sentence');
        const pluralSentence = document.getElementById('plural-sentence');
        const singularPictogram = document.getElementById('singular-pictogram');
        const pluralPictogram = document.getElementById('plural-pictogram');
        const singularPanel = document.getElementById('singular-panel');
        const pluralPanel = document.getElementById('plural-panel');
        const nextButton = document.getElementById('next-activity-btn');
        const feedback = document.getElementById('feedback-message');
        const activityCounter = document.getElementById('activity-counter');

        // --- THE 20 ACTIVITY BANK ---
        // Format: [Singular Noun, Singular Verb (with s/.), Singular Icon, Plural Icon]
        const activityBank = [
            ["The cat", "walks.", "üê±üö∂", "üêà‚Äç‚¨õüêà‚Äç‚¨õüö∂"], // 1
            ["The dog", "runs.", "üêï‚Äçü¶∫üèÉ", "üê∂üê∂üèÉ"], // 2
            ["The boy", "throws.", "üë¶üèª‚öæ", "‚öΩ‚öΩüë¶üèª"], // 3
            ["The girl", "reads.", "üëßüèªüìñ", "üìöüìöüëßüèª"], // 4
            ["The train", "stops.", "üöÇüõë", "üöÇüöÇüõë"], // 5
            ["The engine", "whistles.", "üîäüöÇ", "üöÇüîäüöÇ"], // 6
            ["The student", "learns.", "üßë‚Äçüéìüß†", "üìöüßë‚Äçüéìüß†"], // 7
            ["The teacher", "smiles.", "üë©‚Äçüè´üòä", "üë®‚Äçüè´üë©‚Äçüè´üòä"], // 8
            ["A flower", "grows.", "üå∏üå±", "üåºüåºüå±"], // 9
            ["A baby", "cries.", "üë∂üò≠", "üçºüë∂üò≠"], // 10
            ["My friend", "calls.", "üìûüëØ", "üìûüßë‚Äçü§ù‚Äçüßë"], // 11
            ["The doctor", "helps.", "üë©‚Äç‚öïÔ∏è‚ûï", "üßë‚Äç‚öïÔ∏èüë©‚Äç‚öïÔ∏è‚ûï"], // 12
            ["The clock", "ticks.", "‚è∞‚úîÔ∏è", "üï∞Ô∏è‚è∞‚úîÔ∏è"], // 13
            ["The boat", "sails.", "‚õµüåä", "‚öì‚õµüåä"], // 14
            ["A star", "shines.", "‚≠ê‚ú®", "üåüüåü‚ú®"], // 15
            ["A pencil", "draws.", "‚úèÔ∏èüñçÔ∏è", "üñäÔ∏è‚úèÔ∏èüñçÔ∏è"], // 16
            ["The mouse", "eats.", "üêÅüßÄ", "üê≠üê≠üßÄ"], // 17
            ["The rabbit", "jumps.", "üêá‚¨ÜÔ∏è", "üê∞üê∞‚¨ÜÔ∏è"], // 18
            ["The light", "blinks.", "üí°‚ö°", "üí°üí°‚ö°"], // 19
            ["The farmer", "works.", "üßë‚Äçüåæüî®", "üë©‚Äçüåæüßë‚Äçüåæüî®"] // 20
        ];

        let currentActivityIndex = 0;
        let sTokenIsPlural = false; // Tracks if the -s is on the plural side

        // --- Drag/Drop Handlers ---
        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', 's-morpheme');
            e.target.style.opacity = 0.4;
        }

        function handleTokenClick() {
            if (!sTokenIsPlural) {
                moveSToken(pluralSentence);
            }
        }

        // Drop Zone: Plural Panel
        pluralSentence.parentNode.addEventListener('dragover', (e) => {
            e.preventDefault();
            pluralPanel.style.boxShadow = '0 0 15px var(--red)';
        });

        pluralSentence.parentNode.addEventListener('dragleave', (e) => {
            pluralPanel.style.boxShadow = 'none';
        });

        pluralSentence.parentNode.addEventListener('drop', (e) => {
            e.preventDefault();
            pluralPanel.style.boxShadow = 'none';

            if (e.dataTransfer.getData('text/plain') === 's-morpheme' && !sTokenIsPlural) {
                moveSToken(pluralSentence);
            }
        });

        // Function to move the token and update visuals
        function moveSToken(targetZone) {
            if (targetZone === pluralSentence) {
                // Move from Singular to Plural
                sTokenIsPlural = true;
                updateVisuals();
            } else if (targetZone === singularSentence) {
                // Move from Plural back to Singular (not used in primary task, but for reset)
                sTokenIsPlural = false;
                updateVisuals();
            }
        }

        // --- Core Functions ---

        function updateVisuals() {
            const [singularNoun, singularVerb, singularIcon, pluralIcon] = activityBank[currentActivityIndex];
            
            // Base parts:
            const baseVerb = singularVerb.replace(/\./g, '').slice(0, -1); // e.g., 'walk' (removes 's' and '.')
            const nounPrefix = singularNoun.replace(/The|A/g, 'The'); // ensures "The" is used for plural

            if (sTokenIsPlural) {
                // ü•á CORRECT STATE: Token is on Plural Noun side (The cats walk.)
                
                // Singular Panel: The correct Singular sentence (The cat walks.)
                singularSentence.innerHTML = `${singularNoun} <span id="singular-verb-target">${baseVerb}</span>.`;
                singularSentence.querySelector('#singular-verb-target').appendChild(sToken); // Token is physically moved to singular verb

                // Plural Panel: The Noun part gets the S, and the Verb part is base.
                pluralSentence.innerHTML = `${nounPrefix}<span id="plural-noun-target">${baseVerb}</span> ${baseVerb}.`;
                // Remove token if it was on the plural side before updateVisuals was called
                sToken.remove(); 
                // The physical sToken is now on the Singular side, so the plural side just shows the PLURAL form
                pluralSentence.innerHTML = `${nounPrefix}s ${baseVerb}.`; 
                pluralPictogram.textContent = pluralIcon;

            } else {
                // ‚ùå INCORRECT STATE: Token is on Singular Verb side (The cat walks.)
                
                // Singular Panel: The Verb part gets the token.
                singularSentence.innerHTML = `${singularNoun} <span id="singular-verb-target">${baseVerb}</span>.`;
                singularSentence.querySelector('#singular-verb-target').appendChild(sToken); // Attach -s after the verb base

                // Plural Panel displays the INCORRECT sentence structure (for demonstration)
                pluralSentence.innerHTML = `${nounPrefix}s ${baseVerb}.`;
                pluralPictogram.textContent = singularIcon; // Show singular icon when state is singular
            }
        }
        
        function loadActivity(index) {
            const [singularNoun, singularVerb, singularIcon, pluralIcon] = activityBank[index];
            currentActivityIndex = index;
            sTokenIsPlural = false; // Reset state

            activityCounter.textContent = `Activity ${index + 1} of ${activityBank.length}`;
            nextButton.style.display = 'none';

            // Initial setup always starts in the INCORRECT (Singular) state.
            updateVisuals();
            
            // 3. Set initial state colors
            singularPanel.style.backgroundColor = 'var(--yellow)';
            pluralPanel.style.backgroundColor = 'white';
            feedback.textContent = `Activity loaded. Move the -s!`;
            feedback.style.color = 'var(--text-dark)';
            
            checkState(); // Check initial state (should show error)
        }

        function checkState() {
            if (sTokenIsPlural) {
                // CORRECT STATE (Singular Verb, Plural Noun)
                feedback.textContent = 'ü•á CORRECT! The -s moved from the verb to the noun.';
                feedback.style.color = 'var(--green)';
                singularPanel.style.backgroundColor = 'white';
                pluralPanel.style.backgroundColor = 'var(--yellow)';
                nextButton.style.display = 'inline-block';
            } else {
                // INCORRECT STATE (The default)
                feedback.textContent = '‚ùå Fix the plural side! The -s is still on the singular verb.';
                feedback.style.color = 'var(--red)';
                singularPanel.style.backgroundColor = 'var(--yellow)';
                pluralPanel.style.backgroundColor = 'white';
                nextButton.style.display = 'none';
            }
        }

        function loadNextActivity() {
            const nextIndex = currentActivityIndex + 1;
            if (nextIndex < activityBank.length) {
                loadActivity(nextIndex);
            } else {
                feedback.textContent = "ü•≥ YOU CRUSHED IT! All 20 Plural Punctuation activities complete. Time to master another module.";
                feedback.style.color = 'var(--purple)';
                nextButton.style.display = 'none';
            }
        }

        // Start the first activity on load
        loadActivity(0); 
    </script>
</body>
</html>
        <div class="instruction-box">
            <p><strong>Instructions:</strong> Drag the **$-s$ token** üî¥ from the verb (Singular side) and drop it onto the noun (Plural side) to correctly switch the sentence from singular to plural. Watch the picture change!</p>
        </div>

        <div class="switch-container">
            <div class="singular-panel" id="singular-panel">
                <h3 id="singular-title">Singular (One Cat) üê±</h3>
                <div class="s-token-zone" id="singular-sentence">
                    </div>
                <div class="pictogram-visual" id="singular-pictogram">
                    </div>
            </div>

            <div class="plural-panel" id="plural-panel">
                <h3 id="plural-title">Plural (Multiple Cats) üêà‚Äç‚¨õüêà‚Äç‚¨õ</h3>
                <div class="s-token-zone" id="plural-sentence">
                    </div>
                <div class="pictogram-visual" id="plural-pictogram">
                    </div>
            </div>
        </div>

        <button class="check-button" onclick="checkState()">‚úÖ Check State</button>
        <button class="check-button" id="next-activity-btn" style="display: none; background-color: var(--purple);" onclick="loadNextActivity()">‚û°Ô∏è Next Activity</button>
        <p id="feedback-message" style="font-size: 1.5em; font-weight: 700; margin-top: 20px; color: var(--text-dark);">Move the -s to the correct side!</p>

    </main>
    <footer class="footer">
        <p>Keep those train parts moving! ‚ú®</p>
    </footer>

    <script>
        // --- JavaScript for the Plural Switcher Logic (20 Activities) ---

        const sToken = document.createElement('span');
        sToken.id = 's-token';
        sToken.className = 's-morpheme';
        sToken.textContent = '-s';
        sToken.draggable = true;
        sToken.addEventListener('dragstart', handleDragStart);
        sToken.addEventListener('click', handleTokenClick); // Click handler for accessibility

        const singularSentence = document.getElementById('singular-sentence');
        const pluralSentence = document.getElementById('plural-sentence');
        const singularPictogram = document.getElementById('singular-pictogram');
        const pluralPictogram = document.getElementById('plural-pictogram');
        const singularPanel = document.getElementById('singular-panel');
        const pluralPanel = document.getElementById('plural-panel');
        const nextButton = document.getElementById('next-activity-btn');
        const feedback = document.getElementById('feedback-message');
        const activityCounter = document.getElementById('activity-counter');

        // --- THE 20 ACTIVITY BANK ---
        // Format: [Singular Noun, Singular Verb, Singular Icon, Plural Icon]
        const activityBank = [
            ["The cat", "walks.", "üê±üö∂", "üêà‚Äç‚¨õüêà‚Äç‚¨õüö∂"], // 1
            ["The dog", "runs.", "üêï‚Äçü¶∫üèÉ", "üê∂üê∂üèÉ"], // 2
            ["The boy", "throws.", "üë¶üèª‚öæ", "‚öΩ‚öΩüë¶üèª"], // 3
            ["The girl", "reads.", "üëßüèªüìñ", "üìöüìöüëßüèª"], // 4
            ["The train", "stops.", "üöÇüõë", "üöÇüöÇüõë"], // 5
            ["The engine", "whistles.", "üîäüöÇ", "üöÇüîäüöÇ"], // 6
            ["The student", "learns.", "üßë‚Äçüéìüß†", "üìöüßë‚Äçüéìüß†"], // 7
            ["The teacher", "smiles.", "üë©‚Äçüè´üòä", "üë®‚Äçüè´üë©‚Äçüè´üòä"], // 8
            ["A flower", "grows.", "üå∏üå±", "üåºüåºüå±"], // 9
            ["A baby", "cries.", "üë∂üò≠", "üçºüë∂üò≠"], // 10
            ["My friend", "calls.", "üìûüëØ", "üìûüßë‚Äçü§ù‚Äçüßë"], // 11
            ["The doctor", "helps.", "üë©‚Äç‚öïÔ∏è‚ûï", "üßë‚Äç‚öïÔ∏èüë©‚Äç‚öïÔ∏è‚ûï"], // 12
            ["The clock", "ticks.", "‚è∞‚úîÔ∏è", "üï∞Ô∏è‚è∞‚úîÔ∏è"], // 13
            ["The boat", "sails.", "‚õµüåä", "‚öì‚õµüåä"], // 14
            ["A star", "shines.", "‚≠ê‚ú®", "üåüüåü‚ú®"], // 15
            ["A pencil", "draws.", "‚úèÔ∏èüñçÔ∏è", "üñäÔ∏è‚úèÔ∏èüñçÔ∏è"], // 16
            ["The mouse", "eats.", "üêÅüßÄ", "üê≠üê≠üßÄ"], // 17
            ["The rabbit", "jumps.", "üêá‚¨ÜÔ∏è", "üê∞üê∞‚¨ÜÔ∏è"], // 18
            ["The light", "blinks.", "üí°‚ö°", "üí°üí°‚ö°"], // 19
            ["The farmer", "works.", "üßë‚Äçüåæüî®", "üë©‚Äçüåæüßë‚Äçüåæüî®"] // 20
        ];

        let currentActivityIndex = 0;
        let sTokenIsPlural = false; // Tracks if the -s is on the plural side

        // --- Drag/Drop Handlers ---
        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', 's-morpheme');
            e.target.style.opacity = 0.4;
        }

        function handleTokenClick() {
            if (!sTokenIsPlural) {
                moveSToken(pluralSentence);
            }
        }

        // Drop Zone: Plural Panel
        pluralSentence.parentNode.addEventListener('dragover', (e) => {
            e.preventDefault();
            pluralPanel.style.boxShadow = '0 0 15px var(--red)';
        });

        pluralSentence.parentNode.addEventListener('dragleave', (e) => {
            pluralPanel.style.boxShadow = 'none';
        });

        pluralSentence.parentNode.addEventListener('drop', (e) => {
            e.preventDefault();
            pluralPanel.style.boxShadow = 'none';

            if (e.dataTransfer.getData('text/plain') === 's-morpheme' && !sTokenIsPlural) {
                moveSToken(pluralSentence);
            }
        });

        // Function to move the token and update visuals
        function moveSToken(targetZone) {
            if (targetZone === pluralSentence) {
                // Move from Singular to Plural
                sToken.remove();
                
                // Add token to the end of the plural noun
                const nounSpan = pluralSentence.querySelector('#plural-noun-target');
                if (nounSpan) {
                    nounSpan.textContent = nounSpan.textContent.slice(0, -1); // Remove the existing plural marker for clarity
                    nounSpan.appendChild(sToken);
                }
                
                sTokenIsPlural = true;
                updateVisuals();
            } else if (targetZone === singularSentence) {
                // Move from Plural back to Singular (not used in primary task, but for reset)
                sToken.remove();
                const singularVerb = singularSentence.querySelector('span');
                if (singularVerb) {
                    singularVerb.appendChild(sToken);
                }
                sTokenIsPlural = false;
                updateVisuals();
            }
        }

        // --- Core Functions ---

        function loadActivity(index) {
            const [singularNoun, singularVerb, singularIcon, pluralIcon] = activityBank[index];
            currentActivityIndex = index;
            sTokenIsPlural = false; // Reset state

            activityCounter.textContent = `Activity ${index + 1} of ${activityBank.length}`;
            nextButton.style.display = 'none';

            // 1. Setup Singular Panel
            singularSentence.innerHTML = `${singularNoun} <span id="singular-verb-target">${singularVerb.slice(0, -1)}</span>.`; // Remove -s
            singularSentence.querySelector('span').appendChild(sToken);
            singularPictogram.textContent = singularIcon;
            
// 2. Setup Plural Panel (Use a clean template that doesn't pre-add the extra 's')
        const pluralNounBase = singularNoun.replace(/The|A/g, 'The'); // e.g., 'The cat'
        const pluralVerbBase = singularVerb.slice(0, -1); // e.g., 'walk'

        pluralSentence.innerHTML = `${pluralNounBase} <span id="plural-noun-target">${pluralVerbBase}</span> <span id="plural-verb-target">${pluralVerbBase}</span>.`;
        pluralPictogram.textContent = pluralIcon;

        // This ensures the noun target contains the noun and the verb target contains the verb
        // The logic in updateVisuals will fix the structure when the token moves.

        // Re-call updateVisuals to set the initial visual state correctly
        updateVisuals(); 

        checkState(); // Check initial state (should show error)
    } // Closing bracket for loadActivity

            // 3. Force initial Singular state (Verb has -s)
            singularPanel.style.backgroundColor = 'var(--yellow)';
            pluralPanel.style.backgroundColor = 'white';
            feedback.textContent = `Activity loaded. Move the -s!`;
            feedback.style.color = 'var(--text-dark)';
            
            checkState(); // Check initial state (should show error)
        }

function updateVisuals() {
        const [singularNoun, singularVerb, singularIcon, pluralIcon] = activityBank[currentActivityIndex];

        // Base parts:
        const baseVerb = singularVerb.slice(0, -1); // e.g., walk

        if (sTokenIsPlural) {
            // ü•á CORRECT STATE: Token is on Plural Noun side (The cats walk.)

            // Singular Panel: The verb does NOT have -s. (e.g., The cat walk.)
            singularSentence.innerHTML = `${singularNoun} ${baseVerb}.`;

            // Plural Panel: The Noun part gets the token, and the Verb part is base.
            pluralSentence.innerHTML = `${singularNoun.replace(/The|A/g, 'The')} <span id="plural-noun-target">${baseVerb}</span> ${baseVerb}.`;
            pluralSentence.querySelector('#plural-noun-target').appendChild(sToken); // Attach -s after the noun base

            pluralPictogram.textContent = pluralIcon;

        } else {
            // ‚ùå INCORRECT STATE: Token is on Singular Verb side (The cat walks.)

            // Singular Panel: The Verb part gets the token.
            singularSentence.innerHTML = `${singularNoun} <span id="singular-verb-target">${baseVerb}</span>.`;
            singularSentence.querySelector('#singular-verb-target').appendChild(sToken); // Attach -s after the verb base

            // Plural Panel displays the INCORRECT sentence structure (for demonstration)
            pluralSentence.innerHTML = `${singularNoun.replace(/The|A/g, 'The')}s ${baseVerb}.`;
            pluralPictogram.textContent = singularIcon; // Show singular icon when state is singular
        }
    }
            }
        }
        
        function checkState() {
            if (sTokenIsPlural) {
                // CORRECT STATE (Singular Verb, Plural Noun)
                feedback.textContent = 'ü•á CORRECT! The -s moved from the verb to the noun.';
                feedback.style.color = 'var(--green)';
                singularPanel.style.backgroundColor = 'white';
                pluralPanel.style.backgroundColor = 'var(--yellow)';
                nextButton.style.display = 'inline-block';
            } else {
                // INCORRECT STATE (The default)
                feedback.textContent = '‚ùå Fix the plural side! The -s is still on the singular verb.';
                feedback.style.color = 'var(--red)';
                singularPanel.style.backgroundColor = 'var(--yellow)';
                pluralPanel.style.backgroundColor = 'white';
                nextButton.style.display = 'none';
            }
        }

        function loadNextActivity() {
            const nextIndex = currentActivityIndex + 1;
            if (nextIndex < activityBank.length) {
                loadActivity(nextIndex);
            } else {
                feedback.textContent = "ü•≥ YOU CRUSHED IT! All 20 Plural Punctuation activities complete. Time to master another module.";
                feedback.style.color = 'var(--purple)';
                nextButton.style.display = 'none';
            }
        }

        // Start the first activity on load
        loadActivity(0); 
    </script>
</body>
</html>
